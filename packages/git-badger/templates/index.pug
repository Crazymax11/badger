html
    head
    body
        h3 test-inputs
        form#post
            label project
            input(name="project")
            label badge
            input(name="badge")
            label status
            input(name="status")
            button POST
            img
        form#get
            label project
            input(name="project")
            label badge
            input(name="badge")
            button GET
            img
        script.
            document.querySelector('#post button').addEventListener('click', (event) => {
                event.preventDefault();
                const project = document.querySelector('#post [name="project"]').value;
                const badge = document.querySelector('#post [name="badge"]').value;
                const status = document.querySelector('#post [name="status"]').value;
                console.log('POST', project, badge, status);
                fetch(`/badges/${badge}/${project}`, {
                    method: 'post',
                    headers: {
                        "Content-type": "application/json"
                    },
                    body: JSON.stringify({status: String(status)})
                })
                .then(res => res.text())
                .then(url => document.querySelector('#post img').src = url)
                .catch(console.log)
            });

            document.querySelector('#get button').addEventListener('click', (event) => {
                event.preventDefault();
                const project = document.querySelector('#get [name="project"]').value;
                const badge = document.querySelector('#get [name="badge"]').value;
                console.log('GET', project, badge);
                document.querySelector('#get img').src = `/badges/${badge}/${project}`;
            });
        each badge in badges
            section
                h3 #{badge.name}
                div
                    span #{badge.description}
                    br
                    each example in badge.examples
                        - var link = getLink(badge.create(example))
                        img(src=''+link)
                        br
